<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Larea Browser</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <link rel="icon" type="image/png" href="logo.png" />
  <link rel="shortcut icon" href="logo.png" type="image/x-icon" />

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;500;800&family=Material+Symbols+Outlined" rel="stylesheet" />

  <style>
    /* --- CSS AYNI KALIYOR --- */
    body {
      margin: 0;
      background: radial-gradient(circle at top, #1a1a2e, #050510);
      color: white;
      font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      overflow-x: hidden;
      position: relative;
    }

    .glow {
      position: absolute;
      width: 600px;
      height: 600px;
      background: radial-gradient(circle, rgba(120, 120, 255, 0.15) 0%, rgba(0, 0, 0, 0) 70%);
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: -1;
      pointer-events: none;
    }

    .nav-bar {
      position: fixed;
      top: 0;
      width: 100%;
      display: flex;
      justify-content: center;
      gap: 30px;
      padding: 20px 0;
      z-index: 100;
      backdrop-filter: blur(10px);
      background: rgba(5, 5, 16, 0.5);
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    }

    .nav-btn {
      background: transparent;
      border: none;
      color: #b0b0c0;
      font-size: 16px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s;
      padding: 8px 16px;
      border-radius: 20px;
      font-family: inherit;
    }

    .nav-btn:hover {
      color: white;
      background: rgba(255, 255, 255, 0.05);
    }

    .nav-btn.active {
      color: white;
      background: rgba(255, 255, 255, 0.1);
      box-shadow: 0 0 15px rgba(255, 255, 255, 0.1);
    }

    .coffee-btn {
      position: absolute;
      top: 20px;
      right: 30px;
      display: flex;
      align-items: center;
      gap: 10px;
      text-decoration: none;
      color: #fff;
      background: rgba(255, 221, 0, 0.1);
      border: 1px solid rgba(255, 221, 0, 0.3);
      padding: 8px 16px;
      border-radius: 30px;
      font-weight: 500;
      font-size: 14px;
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
      z-index: 101;
    }

    .coffee-btn:hover {
      background: rgba(255, 221, 0, 0.2);
      box-shadow: 0 0 15px rgba(255, 221, 0, 0.2);
      transform: translateY(-2px);
    }

    .page-section {
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      width: 100%;
      min-height: 100vh;
      padding-top: 80px;
      padding-bottom: 40px;
      animation: fadeIn 0.5s ease-out;
    }

    .page-section.active {
      display: flex;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .card {
      text-align: center;
      padding: 40px;
      max-width: 700px;
      width: 90%;
      border-radius: 24px;
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(24px);
      box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
    }

    h1 {
      font-size: 64px;
      margin: 0;
      background: linear-gradient(135deg, #fff 0%, #a5a5ff 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      letter-spacing: 2px;
      font-weight: 800;
    }

    .tagline {
      font-size: 18px;
      color: #b0b0c0;
      margin-top: 10px;
      font-weight: 300;
    }

    .features {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin: 30px 0;
      flex-wrap: wrap;
    }

    .feature-item {
      display: flex;
      align-items: center;
      gap: 8px;
      background: rgba(255,255,255,0.05);
      padding: 8px 16px;
      border-radius: 12px;
      font-size: 14px;
      color: #e0e0e0;
      border: 1px solid rgba(255,255,255,0.05);
    }

    .feature-item span {
      font-size: 18px;
      color: #7878ff;
    }

    /* GALERİ */
    .gallery-wrapper {
      position: relative;
      width: 100%;
      margin: 30px 0;
      display: flex;
      align-items: center;
    }

    .gallery-container {
      width: 100%;
      overflow: hidden;
      border-radius: 12px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      background: rgba(0, 0, 0, 0.2);
    }

    .gallery-track {
      display: flex;
      gap: 15px;
      padding: 15px;
      overflow-x: auto;
      scroll-behavior: smooth;
      scrollbar-width: none;
      -ms-overflow-style: none;
    }
    
    .gallery-track::-webkit-scrollbar { 
      display: none;
    }

    .gallery-img {
      height: 220px;
      width: auto;
      border-radius: 8px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.3);
      transition: transform 0.3s ease;
      flex-shrink: 0;
      cursor: zoom-in; 
    }

    .gallery-img:hover {
      transform: scale(1.02);
      border: 1px solid rgba(255,255,255,0.3);
    }

    .scroll-btn {
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.1);
      color: white;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      position: absolute;
      z-index: 10;
      transition: all 0.3s;
      backdrop-filter: blur(5px);
    }

    .scroll-btn:hover {
      background: #4facfe;
      transform: scale(1.1);
    }

    .scroll-left { left: -20px; }
    .scroll-right { right: -20px; }

    /* Lightbox */
    .lightbox {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.9);
      z-index: 9999;
      display: none;
      justify-content: center;
      align-items: center;
      cursor: zoom-out;
      animation: fadeIn 0.3s;
    }

    .lightbox img {
      max-width: 90%;
      max-height: 90%;
      border-radius: 12px;
      box-shadow: 0 0 50px rgba(0,0,0,0.5);
      border: 1px solid rgba(255,255,255,0.1);
    }

    /* DOWNLOAD BUTONU */
    .download-btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
      color: #050510;
      text-decoration: none;
      padding: 16px 40px;
      border-radius: 50px;
      font-weight: 800;
      font-size: 18px;
      transition: all 0.3s ease;
      box-shadow: 0 10px 20px rgba(79, 172, 254, 0.3);
      position: relative;
      overflow: hidden;
      border: none;
      cursor: pointer;
    }

    .download-btn:hover {
      transform: translateY(-3px) scale(1.02);
      box-shadow: 0 15px 30px rgba(79, 172, 254, 0.4);
    }

    .download-note {
      margin-top: 15px;
      font-size: 12px;
      color: #666;
    }

    /* FORM ALANI */
    .form-group {
      margin-bottom: 20px;
      text-align: left;
    }

    .form-label {
      display: block;
      margin-bottom: 8px;
      font-size: 14px;
      color: #b0b0c0;
    }

    .form-input, .form-textarea {
      width: 100%;
      padding: 12px;
      background: rgba(0, 0, 0, 0.2);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 8px;
      color: white;
      font-family: 'Inter', sans-serif;
      box-sizing: border-box;
      transition: border-color 0.3s;
    }

    .form-input:focus, .form-textarea:focus {
      outline: none;
      border-color: #4facfe;
    }

    .form-textarea {
      resize: vertical;
      min-height: 120px;
    }

    input[type="file"]::file-selector-button {
      background: rgba(255, 255, 255, 0.1);
      border: none;
      color: white;
      padding: 8px 12px;
      border-radius: 6px;
      cursor: pointer;
      margin-right: 10px;
      transition: background 0.3s;
    }

    input[type="file"]::file-selector-button:hover {
      background: rgba(255, 255, 255, 0.2);
    }

    .success-message {
      display: none;
      flex-direction: column;
      align-items: center;
      gap: 15px;
      animation: fadeIn 0.5s ease;
    }
    
    .success-icon {
      font-size: 64px;
      color: #4caf50;
    }

    .footer {
      position: absolute;
      bottom: 20px;
      font-size: 12px;
      color: #444;
      width: 100%;
      text-align: center;
    }

  </style>
</head>
<body>

  <div class="glow"></div>

  <div id="lightbox" class="lightbox" onclick="closeLightbox()">
    <img id="lightboxImg" src="" alt="Full Screen Preview">
  </div>

  <nav class="nav-bar">
    <button class="nav-btn active" onclick="showPage('home')">Home</button>
    <button class="nav-btn" onclick="showPage('feedback')">Feedback</button>
  </nav>

  <a href="https://buymeacoffee.com/cagsakereng" target="_blank" class="coffee-btn">
    <span class="material-symbols-outlined" style="font-size:18px;">coffee</span>
    <span>Buy Me a Coffee</span>
  </a>

  <section id="home" class="page-section active">
    <div class="card">
      <h1>Larea Browser</h1>
      <p class="tagline">Designed for Speed, Security, and Freedom.</p>

      <div class="features">
        <div class="feature-item">
          <span class="material-symbols-outlined">rocket_launch</span>
          Ultra Fast
        </div>
        <div class="feature-item">
          <span class="material-symbols-outlined">security</span>
          Security
        </div>
        <div class="feature-item">
          <span class="material-symbols-outlined">extension</span>
          Plugin Support
        </div>
        <div class="feature-item">
          <span class="material-symbols-outlined">music_note</span>
          Music Finder
        </div>
      </div>

      <div class="gallery-wrapper">
        <button class="scroll-btn scroll-left" onclick="scrollGallery(-1)">
          <span class="material-symbols-outlined">chevron_left</span>
        </button>
        
        <div class="gallery-container">
          <div class="gallery-track" id="galleryTrack">
            <img src="picture_1.png" alt="Screenshot 1" class="gallery-img" onclick="openLightbox(this.src)">
            <img src="picture_2.png" alt="Screenshot 2" class="gallery-img" onclick="openLightbox(this.src)">
            <img src="picture_3.png" alt="Screenshot 3" class="gallery-img" onclick="openLightbox(this.src)">
            <img src="picture_4.png" alt="Screenshot 4" class="gallery-img" onclick="openLightbox(this.src)">
          </div>
        </div>

        <button class="scroll-btn scroll-right" onclick="scrollGallery(1)">
          <span class="material-symbols-outlined">chevron_right</span>
        </button>
      </div>

      <a id="downloadBtn" href="#" class="download-btn">
        <span class="material-symbols-outlined">download</span>
        <span id="btnText">LOADING...</span>
      </a>
      
      <p id="versionText" class="download-note">Checking for updates...</p>
    </div>
  </section>

  <section id="feedback" class="page-section">
    <div class="card" style="max-width: 500px;">
      <h2 style="margin-top:0; margin-bottom: 20px; font-weight: 300;">Feedback & Support</h2>
      
      <form id="feedbackForm" action="https://formsubmit.co/cagsakerentaha@gmail.com" method="POST" enctype="multipart/form-data">
        <input type="hidden" name="_captcha" value="false">
        <input type="hidden" name="_template" value="table">
        <input type="text" name="_honey" style="display:none">

        <div class="form-group">
          <label class="form-label">Subject</label>
          <input type="text" name="subject" class="form-input" placeholder="Bug Report / Suggestion" required>
        </div>

        <div class="form-group">
          <label class="form-label">Your Message</label>
          <textarea name="message" class="form-textarea" placeholder="Describe your issue or idea..." required></textarea>
        </div>

        <div class="form-group">
          <label class="form-label">Attachment (Optional)</label>
          <input type="file" name="attachment" accept="image/png, image/jpeg, .pdf, .log, .txt" class="form-input" style="padding: 8px;">
        </div>

        <div class="form-group">
          <label class="form-label">Your Email (For reply)</label>
          <input type="email" name="email" class="form-input" placeholder="example@mail.com" required>
        </div>

        <button type="submit" class="download-btn" style="width:100%; border-radius:12px; font-size:16px;">
          SEND FEEDBACK
        </button>
      </form>

      <div id="successMessage" class="success-message">
        <span class="material-symbols-outlined success-icon">check_circle</span>
        <h3 style="margin:0;">Feedback Sent!</h3>
        <p style="opacity:0.7; font-size:14px;">Thank you for your contribution. We will review it shortly.</p>
        <button onclick="resetForm()" class="nav-btn" style="border: 1px solid rgba(255,255,255,0.2); margin-top:10px;">Send Another</button>
      </div>

    </div>
  </section>

  <div class="footer">© 2025 Larea Browser Project</div>

  <script>
    // --- GALERİ ---
    const track = document.getElementById('galleryTrack');

    setTimeout(() => { if(track) track.scrollLeft = 0; }, 100);

    function scrollGallery(direction) {
      track.scrollBy({ left: direction * 300, behavior: 'smooth' });
    }

    function openLightbox(src) {
      const lightbox = document.getElementById('lightbox');
      document.getElementById('lightboxImg').src = src;
      lightbox.style.display = 'flex';
    }

    function closeLightbox() {
      document.getElementById('lightbox').style.display = 'none';
    }
    // --- END GALERİ ---


    // --- GÜÇLENDİRİLMİŞ İNDİRME MANTIĞI ---
    async function fetchLatestRelease() {
        const user = 'erencagsak';
        const repo = 'Larea-Browser';
        
        // Önemli: API hata verirse bu dosyayı indirmeyi deneyecek.
        // GitHub'a dosya yüklerken "Larea-Setup.exe" gibi sabit isim koyarsan bu kısım hayat kurtarır.
        const fallbackFilename = 'Larea-Browser-Setup.exe'; 
        
        const btn = document.getElementById('downloadBtn');
        const btnText = document.getElementById('btnText');
        const verText = document.getElementById('versionText');

        // 1. ÖNCE HAFIZAYA BAK (Cache) - API Limitini korur
        // Daha önce linki bulduysak, tekrar GitHub'a sormadan direkt onu kullan.
        const cachedUrl = sessionStorage.getItem('larea_dl_url');
        const cachedVer = sessionStorage.getItem('larea_dl_ver');

        if (cachedUrl && cachedVer) {
            console.log("Using cached URL");
            btn.href = cachedUrl;
            btnText.innerText = "DOWNLOAD FOR WINDOWS";
            verText.innerText = `Version: ${cachedVer} (Ready)`;
            return; // Fonksiyonu burada bitir, internete çıkma.
        }

        // 2. HAFIZADA YOKSA GITHUB'A SOR
        try {
            const response = await fetch(`https://api.github.com/repos/${user}/${repo}/releases/latest`);
            
            if (!response.ok) throw new Error('API Rate Limit or Error');

            const data = await response.json();
            
            // Sonu .exe ile biten dosyayı bul (İsmi ne olursa olsun)
            const asset = data.assets.find(a => a.name.toLowerCase().endsWith('.exe'));

            if (asset) {
                const downloadUrl = asset.browser_download_url;
                
                // Linki butona ata
                btn.href = downloadUrl;
                btnText.innerText = "DOWNLOAD FOR WINDOWS";
                verText.innerText = `Version: ${data.tag_name}`;
                
                // Sonraki girişler için hafızaya kaydet (Tarayıcı kapanana kadar)
                sessionStorage.setItem('larea_dl_url', downloadUrl);
                sessionStorage.setItem('larea_dl_ver', data.tag_name);
            } else {
                throw new Error('Exe not found');
            }

        } catch (error) {
            console.log("API hatası oluştu, manuel mod devreye giriyor.", error);
            
            // 3. API HATASI OLURSA (BURASI ÖNEMLİ)
            // Seni GitHub sayfasına yönlendirme kodunu SİLDİM.
            // Onun yerine "tahmini" bir indirme linki oluşturuyoruz.
            // Bu link çalışsın istiyorsan GitHub'daki dosyanın adı "Larea-Browser-Setup.exe" olmalı.
            
            btn.href = `https://github.com/${user}/${repo}/releases/latest/download/${fallbackFilename}`;
            
            btnText.innerText = "DOWNLOAD NOW";
            verText.innerText = "Direct Download (Server Busy)";
            
            // Eğer dosya adı tutmazsa yine 404 olabilir ama en azından GitHub sayfasına atmaz.
            // Kullanıcı butona bastığında indirme başlamazsa uyarı verebiliriz:
            btn.onclick = function(e) {
                // Eğer href linki bozuksa diye küçük bir güvenlik
                setTimeout(() => {
                    // İndirme başlamazsa kullanıcı anlasın diye 2 saniye sonra log düşebiliriz
                    // ama şimdilik standart indirme davranışı yeterli.
                }, 1000);
            };
        }
    }

    fetchLatestRelease();
    // --- END İNDİRME MANTIĞI ---

    function showPage(pageId) {
      document.querySelectorAll('.page-section').forEach(section => {
        section.classList.remove('active');
      });
      document.querySelectorAll('.nav-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      document.getElementById(pageId).classList.add('active');
      const clickedBtn = Array.from(document.querySelectorAll('.nav-btn'))
                              .find(b => b.innerText.toLowerCase() === pageId);
      if(clickedBtn) clickedBtn.classList.add('active');
    }
    
    const form = document.getElementById('feedbackForm');
    const successMsg = document.getElementById('successMessage');

    if(form) {
        form.addEventListener('submit', function(e) {
          e.preventDefault();
          const submitBtn = form.querySelector('button[type="submit"]');
          const originalText = submitBtn.innerText;
          submitBtn.innerText = "Sending...";
          submitBtn.disabled = true;
          submitBtn.style.opacity = "0.7";

          const formData = new FormData(form);

          fetch(form.action, { method: 'POST', body: formData })
          .then(response => {
            if(response.ok) {
              form.style.display = 'none';
              successMsg.style.display = 'flex';
            } else {
              alert("Error sending message.");
            }
          })
          .catch(error => { alert("Connection error."); })
          .finally(() => {
            submitBtn.innerText = originalText;
            submitBtn.disabled = false;
            submitBtn.style.opacity = "1";
          });
        });
    }

    function resetForm() {
      form.reset();
      successMsg.style.display = 'none';
      form.style.display = 'block';
    }
  </script>

</body>
</html>
